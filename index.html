<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- IMG Tag Pixel Integration -->
    
    <img src="https://www.facebook.com/tr?id=36402296501972&ev=PageView&noscript=1" />
    <title>Facebook Pixel Add to Cart with Form</title>
    <!-- Facebook Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '36402296501972', {
            autoConfig: true,
            em: true // Enables automatic advanced matching for email, phone, and other fields
        }); 
        fbq('track', 'PageView');
    </script>
    <noscript>
        <img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=36402296501972&ev=PageView&noscript=1"/>
    </noscript>
</head>
<body>
    <h1>Facebook Pixel Add to Cart Test</h1>

    <!-- Form to collect Name and Email -->
    <form id="userDetailsForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter your name" required><br><br>
        
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" placeholder="Enter your email" required><br><br>

        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required><br><br>

        <label for="product">Product SKU:</label>        
        <select name="product" id="product">
          <option value="productA">AUTO</option>
          <option value="productB">Product B</option>
          <option value="productC">Product C</option>
          <option value="productD">Product D</option>
        </select>

        <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required><br><br>

        
        <button type="button" id="addToCartButton">Add to Cart</button>

        <button type="button" id="purchase">Purchase</button>
    </form>

    <!-- JavaScript to trigger the addToCart event -->
    <script>
        document.getElementById('addToCartButton').addEventListener('click', function() {
            // Get the values from the form
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const product = document.getElementById('product').value;

            if (!name || !email) {
                alert('Please enter both your name and email.');
                return;
            }

            // Trigger Facebook Pixel AddToCart event with user data
            fbq('track', 'AddToCart', {
                content_name: 'Test Product',
                content_category: 'Example Category',
                content_ids: [product],
                content_type: 'product',
                value: 50.00,
                currency: 'USD',
                user_name: name
            });
        });

        document.getElementById('purchase').addEventListener('click', function() {
            // Get the values from the form
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const product = document.getElementById('product').value;

            if (!name || !email) {
                alert('Please enter both your name and email.');
                return;
            }

            // Trigger Facebook Pixel AddToCart event with user data
            fbq('track', 'Purchase', {
                content_ids: [product],
                value: 50.00,
                currency: 'USD',
                user_name: name
            });

            // //Custom Event
            // fbq('track', 'OrderCreated', {
            //     content_name: 'Test Product',
            //     content_category: 'Example Category',
            //     content_ids: [product],
            //     content_type: 'product',
            //     value: 50.00,
            //     currency: 'USD',
            //     order_id: '1122334455',
            //     user_name: name
            // });            
        });        
        
    </script>
</body>
</html>
