<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- IMG Tag Pixel Integration -->    
    <title>Facebook Pixel Test</title>
<!-- Google Tag Manager -->
<!-- <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBBR2643');</script>
<!-- End Google Tag Manager --> 
<!--     Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    
    fbq('set', 'autoConfig', false, 'FB_PIXEL_ID'); 
    fbq('init', '36402296501972');
    fbq('track', 'PageView');
    </script>
    <!-- End Meta Pixel Code -->
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KBBR2643"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <h1>Facebook Pixel Test</h1>

    <!-- Form to collect Name and Email -->
    <form id="userDetailsForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter your name" required><br><br>
        
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" placeholder="Enter your email" required><br><br>

        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required><br><br>

        <label for="phone">Event Id:</label>
        <input type="text" id="eid" name="eid" placeholder="event id"><br><br>

        
        <label for="product">Product :</label>        
        <select name="product" id="product">
          <option value="TOYS">TOYS</option>
          <option value="MOBILE">MOBILE</option>
          <option value="ACCESSORIES">ACCESSORIES</option>
        </select>
        
        <button type="button" id="purchase" data-gtm="purchase_button">Purchase</button>
    </form>

    <!-- JavaScript to trigger the addToCart event -->
    <script>
        document.getElementById('purchase').addEventListener('click', function() {
            // Get the values from the form
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const product = document.getElementById('product').value;
            const eventId = document.getElementById('eid').value;

            if (!name || !email) {
                alert('Please enter both your name and email.');
                return;
            }            

            // // Trigger Facebook Pixel AddToCart event with user data
            fbq('track', 'Purchase', {
                content_ids: [product],
                value: 50.00,
                currency: 'USD',
                user_name: name
            }, {eventID: 'purchase-'+eventId});
        });        
    </script>
</body>
</html>
